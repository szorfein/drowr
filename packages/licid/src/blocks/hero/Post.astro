---
import ChipsSuggestion from "../../components/chips/Suggestion.astro";

type Tag = {
  id: string;
  slug: string;
  name: string;
};

interface Props {
  tags?: Tag[];
  title?: string;
  publishedAt?: Date;
  updatedAt?: Date;
}

const { tags, title, publishedAt, updatedAt } = Astro.props;

let options = {
  year: "numeric",
  month: "short",
  day: "numeric",
};

const formattedPubDate = new Intl.DateTimeFormat("en-US", options).format(
  new Date(publishedAt),
);

const formattedUpdDate = new Intl.DateTimeFormat("en-US", options).format(
  new Date(updatedAt),
);
---

<header class="pt-14 pb-6">
  <div class="mb-12">
    <a
      href="/posts"
      class="back-link text-primary dark:text-dark-primary mb-8 block"
      >‚Üê Back to Blog</a
    >

    <h1 class="display-medium mb-4">{title}</h1>

    <div
      class="label-medium text-primary dark:text-dark-primary mb-4 flex gap-4"
    >
      <time>{formattedPubDate}</time>
      {
        formattedUpdDate && (
          <span class="post-updated text-onSurface/80 dark:text-dark-onSurface/80">
            Updated: {formattedUpdDate}
          </span>
        )
      }
    </div>

    {
      tags && tags.length > 0 && (
        <div class="mt-6 flex flex-wrap gap-4">
          {tags.map((tag) => (
            <span class="text-onSurface dark:text-dark-onSurface">
              <ChipsSuggestion name={tag.name} slug={tag.slug} />
            </span>
          ))}
        </div>
      )
    }
  </div>
</header>

<style>
  @reference "../../styles.css";
  .back-link:hover {
    @apply text-error dark:text-dark-error;
    transform: translateX(-5px);
  }
</style>
